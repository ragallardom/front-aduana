<!-- src/app/pages/solicitudes-aduana/formulario-solicitud/formulario-solicitud.component.html -->
<div class="container">
  <h2 class="mb-4">Registrar Nueva Solicitud Aduana</h2>

  <!-- Mensaje de error general -->
  <div *ngIf="errorMsg" class="alert alert-danger">
    {{ errorMsg }}
  </div>

  <form
    [formGroup]="formulario"
    (ngSubmit)="guardar()"
  >
    <!-- Datos de los padres o tutores legales -->
    <fieldset class="mb-4">
      <legend class="fs-5">Datos de los padres o tutores legales</legend>

      <!-- Nombre completo del padre/madre -->
      <div class="mb-3">
        <label class="form-label">Nombre completo (Padre/Madre)</label>
        <input
          type="text"
          formControlName="nombrePadreMadre"
          class="form-control"
        />
        <div
          *ngIf="
            formulario.get('nombrePadreMadre')?.invalid &&
            formulario.get('nombrePadreMadre')?.touched
          "
          class="text-danger"
        >
          El nombre es obligatorio.
        </div>
      </div>

      <!-- Relación con el menor -->
      <div class="mb-3">
        <label class="form-label">Relación con el menor</label>
        <select formControlName="relacionMenor" class="form-select">
          <option value="" disabled>-- Selecciona --</option>
          <option value="Padre">Padre</option>
          <option value="Madre">Madre</option>
          <option value="Tutor legal">Tutor legal</option>
        </select>
        <div
          *ngIf="
            formulario.get('relacionMenor')?.invalid &&
            formulario.get('relacionMenor')?.touched
          "
          class="text-danger"
        >
          Debes indicar la relación con el menor.
        </div>
      </div>

      <!-- Documento del padre o tutor -->
      <div class="mb-3">
        <label class="form-label">RUT o Pasaporte</label>
        <input
          type="text"
          formControlName="documentoPadre"
          class="form-control"
        />
        <div
          *ngIf="
            formulario.get('documentoPadre')?.invalid &&
            formulario.get('documentoPadre')?.touched
          "
          class="text-danger"
        >
          El documento es obligatorio.
        </div>
      </div>

      <!-- Teléfono -->
      <div class="mb-3">
        <label class="form-label">Teléfono de contacto</label>
        <input
          type="text"
          formControlName="telefonoPadre"
          class="form-control"
        />
        <div
          *ngIf="
            formulario.get('telefonoPadre')?.invalid &&
            formulario.get('telefonoPadre')?.touched
          "
          class="text-danger"
        >
          El teléfono es obligatorio.
        </div>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input
          type="email"
          formControlName="emailPadre"
          class="form-control"
        />
        <div
          *ngIf="
            formulario.get('emailPadre')?.invalid &&
            formulario.get('emailPadre')?.touched
          "
          class="text-danger"
        >
          Ingresa un email válido.
        </div>
      </div>
    </fieldset>

    <!-- Nombre del Solicitante -->
    <div class="mb-3">
      <label class="form-label">Nombre Solicitante</label>
      <input
        type="text"
        formControlName="nombreSolicitante"
        class="form-control"
      />
      <div
        *ngIf="
          formulario.get('nombreSolicitante')?.invalid &&
          formulario.get('nombreSolicitante')?.touched
        "
        class="text-danger"
      >
        El nombre del solicitante es obligatorio.
      </div>
    </div>

    <!-- Tipo de Documento -->
    <div class="mb-3">
      <label class="form-label d-block">Tipo Documento</label>
      <div class="btn-group" role="group" aria-label="Tipo Documento">
        <input
          type="radio"
          class="btn-check"
          formControlName="tipoDocumento"
          value="RUT"
          id="tipo-rut"
        />
        <label class="btn btn-outline-primary" for="tipo-rut">RUT</label>

        <input
          type="radio"
          class="btn-check"
          formControlName="tipoDocumento"
          value="Pasaporte"
          id="tipo-pasaporte"
        />
        <label class="btn btn-outline-primary" for="tipo-pasaporte">Pasaporte</label>
      </div>
      <div
        *ngIf="
          formulario.get('tipoDocumento')?.invalid &&
          formulario.get('tipoDocumento')?.touched
        "
        class="text-danger mt-1"
      >
        El tipo de documento es obligatorio.
      </div>
    </div>

    <!-- Número de Documento -->
    <div class="mb-3">
      <label class="form-label">Número Documento</label>
      <input
        type="text"
        formControlName="numeroDocumento"
        class="form-control"
      />
      <div
        *ngIf="
          formulario.get('numeroDocumento')?.invalid &&
          formulario.get('numeroDocumento')?.touched
        "
        class="text-danger"
      >
        El número de documento es obligatorio.
      </div>
    </div>

    <!-- Motivo -->
    <div class="mb-3">
      <label class="form-label">Motivo</label>
      <input type="text" formControlName="motivo" class="form-control" />
      <div
        *ngIf="
          formulario.get('motivo')?.invalid &&
          formulario.get('motivo')?.touched
        "
        class="text-danger"
      >
        El motivo es obligatorio.
      </div>
    </div>

    <!-- País de Origen -->
    <div class="mb-3">
      <label class="form-label">País Origen</label>
      <input type="text" formControlName="paisOrigen" class="form-control" />
      <div
        *ngIf="
          formulario.get('paisOrigen')?.invalid &&
          formulario.get('paisOrigen')?.touched
        "
        class="text-danger"
      >
        El país de origen es obligatorio.
      </div>
    </div>

    <!-- Tipo de Documento Adjunto -->
    <div class="mb-3">
      <label class="form-label">Tipo Documento Adjunto</label>
      <select formControlName="tipoAdjunto" class="form-select">
        <option value="" disabled>-- Selecciona un tipo --</option>
        <option
          *ngFor="let tipo of tiposAdjunto"
          [value]="tipo"
        >
          {{ tipo }}
        </option>
      </select>
      <div
        *ngIf="
          formulario.get('tipoAdjunto')?.invalid &&
          formulario.get('tipoAdjunto')?.touched
        "
        class="text-danger"
      >
        Debes elegir un tipo de documento adjunto.
      </div>
    </div>

    <!-- Archivo -->
    <div class="mb-3">
      <label class="form-label">Archivo (PDF, JPG, etc.)</label>
      <input
        type="file"
        (change)="onFileChange($event)"
        class="form-control"
      />
      <div
        *ngIf="!archivoSeleccionado"
        class="text-danger"
      >
        Debes seleccionar un archivo.
      </div>
    </div>

    <!-- Botones -->
    <button
      type="submit"
      class="btn btn-primary me-2"
      [disabled]="formulario.invalid"
    >
      Guardar Solicitud
    </button>
    <button
      type="button"
      class="btn btn-secondary"
      (click)="cancelar()"
    >
      Cancelar
    </button>
  </form>
</div>
